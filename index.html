<html lang="en">
	<head>
		<title>Deck Baluster Spacing Calculator</title>

		<style>
			fieldset {
				width: 400px
			}
			
			label,
			input[type=text],
			input[type=number] {
				display: block;
				width: 100%;
			}
			
			label:not(first-of-type),
			input[type=button] {
				margin-top: 5px;
			}
		</style>

		<script src="https://unpkg.com/vue"></script>
	</head>

	<body>
		<h1>Deck Baluster Spacing</h1>

		<div id="vueApp">					
			<fieldset @keydown="inputKeyDown">
				<legend>Input</legend>
				<label for="onCenterSpacing">On Center Spacing</label>
				<input type="number" id="onCenterSpacing" v-model="inputs.centerSpacing" />
				<label for="balusterWidth">Baluster Width</label>
				<input type="number" id="balusterWidth" v-model="inputs.balusterWidth" />
				<label for="railingLength">Railing Length</label>
				<input type="number" id="railingLength" v-model="inputs.railingLength" />
				<input type="button" id="calculate" value="Calculate" @click="calculateResult" />
			</fieldset>
			<br />
				
			<fieldset v-if="hasResult">
				<legend>Output</legend>
				<label for="balustersRequired">Balusters Required</label>
				<input type="text" id="balustersRequired" readOnly :value="outputs.balustersRequired" />
				<label for="balusterSpacing">Baluster Spacing (for even, on-center, baluster spacing)</label>
				<input type="text" id="balusterSpacing" readOnly :value="outputs.balusterSpacing" />
				<label for="balusterSpacingBetween">Baluster Spacing (between balusters)</label>
				<input type="text" id="balusterSpacingBetween" readOnly :value="outputs.balusterSpacingBetween" />
			</fieldset>
		</div>
			
		<ul>
			<li>For an odd number of balusters locate the first one at the center of the railing. The baluster should be centered directly underneath the center of the railing.</li>
			<li>For an even number of required balusters, you will need to locate the first two balusters from the center railing point half the baluster spacing amount.</li>
		</ul>
		
		<p>
			Credit: <a href="http://www.homeadditionplus.com/dev/finish_carpentry/how-to-evenly-space-balusters/">http://www.homeadditionplus.com/dev/finish_carpentry/how-to-evenly-space-balusters/</a>
		</p>

		<script>
			new Vue({
				el: "#vueApp",

				data: {
					inputs: {
						centerSpacing: 0,
						balusterWidth: 0,
						railingLength: 0
					},
					outputs: {
						balustersRequired: 0,
						balusterSpacing: 0,
						balusterSpacingBetween: 0
					},
					hasResult: false
				},

				methods: {
					calculateResult: function() {
						// Result "result" flag
						this.hasResult = false;

						// Check input
						console.log("On-center spacing value:", this.inputs.centerSpacing, "Baluster width value:", this.inputs.balusterWidth, "Railing length value:", this.inputs.railingLength);
						if (!(this.inputs.centerSpacing > 0 && this.inputs.balusterWidth > 0 && this.inputs.railingLength > 0)) { return; }
						
						// Railing length + width of one baluster
						var RL = this.inputs.railingLength + this.inputs.balusterWidth;
						console.log("RL calculation value:", RL);
						
						// On-center spacing + width of one baluster
						var BW = this.inputs.centerSpacing + this.inputs.balusterWidth;
						console.log("BW calculation value:", BW);
						
						// Divide RL by BW and round down to nearest whole number
						var RB = Math.floor(RL / BW);
						console.log("RB calculation value:", RB);
						
						// Multiply balusters required (RB) by baluster width, subtract this from RL, then divide by RB+1
						var BS = (RL - (RB * this.inputs.balusterWidth)) / (RB + 1);
						console.log("BS calculation value:", BS);
						
						this.outputs.balustersRequired = RB;
						this.outputs.balusterSpacing = BS;
						this.outputs.balusterSpacingBetween = BS - this.inputs.balusterWidth;
						this.hasResult = true;
					},

					inputKeyDown: function(e) {
						if (e.keyCode === 13) {
							this.calculateResult();
						}
					}
				}
			});
		</script>
	</body>
</html>
